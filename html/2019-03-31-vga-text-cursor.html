<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>2019-03-31-vga-text-cursor</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="./all.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>
<body>
<header id="title-block-header">
<h1 class="title">2019-03-31-vga-text-cursor</h1>
</header>
<h1 id="介绍">介绍</h1>
<p>在多数高级语言中处理光标的时候,光标定义为接下来的文本将会出现的位置.在直接处理显示的时候,光标只是一个闪烁的特定图形.和文本的 输出位置并无关系. VGA提供了指定是否显示光标,光标显示到哪,光标的形状. 但要注意,这个光标只用于标准VGA的文本模式,不要和某些特定 SVGA芯片组的图形光标混淆</p>
<h1 id="开启关闭光标">开启,关闭光标</h1>
<p>在VGA中有三个主要的关闭光标的方式.最直接的是将<code>Cursor Disable</code>域设为1.另一个方式是讲<code>Cursor Scan line End</code>域设置为小于 <code>Cru.... start</code>域的值.在某些适配器上,比如IBM EGA,这会导致产生一个split block光标(??).第三个方式是讲光标位置设置为屏幕外的一个位置. 前面的两种都是VGA及其兼容的适配器才有的,不保证能够在非VGA适配器上工作,而第三种可以</p>
<h1 id="操作光标位置">操作光标位置</h1>
<p>在标准BIOS文本模式中处理光标的时候,光标的位置是通过行和列来指定的.VGA硬件,由于为了不同文本模式的显示的灵活性,讲光标位置制定为一个16bit的地址, 高位字节由<code>Cursor location high </code>寄存器制定,地位有<code>..low..</code>指定.此外这个值还收到<code>cursor skew</code>域的影响. 当硬件从显示内存获取一个字符的时候, 会比较字符的来源地址和添加到<code>cursor skew</code>域的光标未知比较.如果他们是相同的.并且光标开启了,那么这个字符就会放在光标之下(叠加). 注意,和光标位置比较的地址显示内存中的,不是主机内存中的. 字符和其属性存在不同plane的显示内存中的相同位置,并且在文本模式中使用的 <code>odd/even</code>寻址模式使得字节,属性可以交错出现在主机内存中.光标是可以设置到不显示的地址的,等同于关闭光标</p>
<p><code>cursor skew</code>域用于EGA,用来同步光标和内部计时器.在VGA上则没有必要.在某些显卡上,将光标位置设置到最右的劣质并且讲skew设置1会使得光标完全消失. 也是在这些卡上,光标位置设置为最左并且讲skew设置为1会使得在管标正确位置左上出现另一个光标.在其他的位置,将skew设置为1只是将光标右移一个位置. 除了这些不想要的效果之外,这个寄存器没有什么作用</p>
<h1 id="操作管标形状">操作管标形状</h1>
<p>在VGA中,文本模式光标是一行或者行水平展开一个字符的扫描线得到的块构成.最前,最上的行是由<code>cursor scan line start</code>域制定的. 最后,最下的行是由<code>cursor scan line end</code>域制定.一个字符cell中的扫描线编号从0到<code>maximum scan line</code>域.在VGA,<code>end</code>小于<code>start</code>,不会显示光标. ...</p>
<h1 id="管标闪烁速率">管标闪烁速率</h1>
<p>在标准VGA上,闪烁速率取决于垂直frame速率.关标的显隐状态每16个垂直frame改变,在垂直帧是60的时候差不多是1.875次闪烁每秒.因此在标准VGA之上, 光标闪烁速率是固定的,不能被软件控制的.某些SVGA芯片组提供了改变文本模式下闪烁速率的非标准方法</p>
<h1 id="光标颜色">光标颜色</h1>
<p>在标准VGA上,管标颜色是从字符的前景色获取的.在标准VGA上没有办法修改这个行为</p>
</body>
</html>
